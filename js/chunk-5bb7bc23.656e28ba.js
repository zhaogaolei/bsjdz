(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5bb7bc23"],{"0c77":function(t,e,o){"use strict";var s=o("4bb5"),n=o.n(s);n.a},2773:function(t,e,o){},4548:function(t,e,o){},"4bb5":function(t,e,o){},d9e8:function(t,e,o){"use strict";var s=o("2773"),n=o.n(s);n.a},dd74:function(t,e,o){},e529:function(t,e,o){"use strict";var s=o("dd74"),n=o.n(s);n.a},eae8:function(t,e,o){"use strict";var s=o("4548"),n=o.n(s);n.a},eb07:function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"demo-coupon-panel"},[t._m(0),o("div",{staticStyle:{padding:"2px 18px 12px 18px"}},[o("zmjd-button",{on:{click:function(e){return t.openCoupon(100)}}},[t._v(" 选择现金券（订单100元） ")]),o("br"),o("br"),o("zmjd-button",{on:{click:function(e){return t.openCoupon(500)}}},[t._v(" 选择现金券（订单500元） ")]),o("br"),o("br"),o("zmjd-button",{on:{click:t.openCashCoupon}},[t._v(" 选择代金券 ")])],1),o("coupon-panel",{attrs:{"coupon-type":1,"source-id":9839,"order-type":1,"order-price":t.couponOrderPrice},model:{value:t.showCouponPanel,callback:function(e){t.showCouponPanel=e},expression:"showCouponPanel"}}),o("coupon-panel",{attrs:{"coupon-type":2,"can-use-cash-coupon":!1,"source-id":9839,"order-type":1,"order-price":599},model:{value:t.showCashCouponPanel,callback:function(e){t.showCashCouponPanel=e},expression:"showCashCouponPanel"}}),o("div",{staticClass:"test-coupon-list"},[t._m(1),t._l(t.testCouponList,(function(e){return o("coupon-item",{key:e.idx,attrs:{"cus-class":"test-coupon-list-item","coupon-data":e,"is-usable":123!==e.idx,"can-select":!1,"show-detail":!0,"show-to-use":123!==e.idx,"show-expire-tips":!1},on:{detailClick:t.testDetailClick,toUseClick:t.testToUseClick}})}))],2)],1)},n=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{padding:"12px 12px 6px 12px"}},[t._v(" 优惠券模块，通常通过点击按钮调起"),o("br"),o("pre",[t._v("    * @module components/couponpanel\n    * 描述：优惠券组件，主要用于订单提交时使用\n    * value：是否显示组件\n    * couponType： 优惠券类型（1现金券 2代金券）\n    * canUseFullDiscount: 是否可用满减券\n    * canUseCashCoupon: 是否可用代金券\n    * sourceId：套餐ID或SKUID\n    * orderType：订单类型（1酒店订单、2券订单）\n    * orderPrice：订单金额\n    * selectIdx: 默认选中的券对象idx\n    * @onSelect 优惠券选择事件（返回选择的券对象）\n    * @onNotUsed 不使用事件（无返回）\n    ")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{margin:"0 0 12px 2px"}},[o("b",[t._v("现金券列表")])])}],i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"coupon-panel"},[o("zmjd-popup",{attrs:{closeable:"",position:"bottom",round:"","popup-style":{height:"590px"}},model:{value:t.isShowPopup,callback:function(e){t.isShowPopup=e},expression:"isShowPopup"}},[o("div",{staticClass:"popup-title"},[t._v(" "+t._s(t.couponTypeName)+" ")]),o("div",[o("zmjd-tabs",{staticClass:"type-tabs",attrs:{border:!1},on:{click:t.typeTabClick},model:{value:t.typeTabValue,callback:function(e){t.typeTabValue=e},expression:"typeTabValue"}},[o("zmjd-tab",{key:0,attrs:{title:"可用"}},[1!==this.couponType&&"1"!==this.couponType||t.canUseFullDiscount?t._e():o("div",{staticClass:"coupon-notuse-tip"},[t._v(" 该商品不支持使用满减券 ")]),2!==this.couponType&&"2"!==this.couponType||t.canUseCashCoupon?t._e():o("div",{staticClass:"coupon-notuse-tip"},[t._v(" 该商品不支持使用代金券 ")]),t.usableCouponList&&t.usableCouponList.length?o("div",{staticClass:"coupon-list",style:{height:t.canUseFullDiscount&&t.canUseCashCoupon?"500px":"474px"}},[o("div",{staticClass:"not-used-section"},[o("zmjd-button",{attrs:{type:"primary",size:"large",plain:""},on:{click:t.onNotUsed}},[t._v(" 不使用 ")])],1),t._l(t.usableCouponList,(function(e){return o("coupon-item",{key:e.idx,attrs:{"cus-class":"coupon-list-item","coupon-data":e,"is-usable":!0,"is-selected":t.selectCouponIdx===e.idx},on:{click:t.onSelect}})}))],2):o("none-page",{staticStyle:{height:"100vh"},attrs:{desc:"您暂无此类"+t.couponTypeName,"img-style":"margin-top:70px;width:165px;height:165px"}})],1),o("zmjd-tab",{key:1,attrs:{title:"不可用"}},[1!==this.couponType&&"1"!==this.couponType||t.canUseFullDiscount?t._e():o("div",{staticClass:"coupon-notuse-tip"},[t._v(" 该商品不支持使用满减券 ")]),2!==this.couponType&&"2"!==this.couponType||t.canUseCashCoupon?t._e():o("div",{staticClass:"coupon-notuse-tip"},[t._v(" 该商品不支持使用代金券 ")]),t.noUsableCouponList&&t.noUsableCouponList.length?o("div",{staticClass:"coupon-list",style:{height:t.canUseFullDiscount&&t.canUseCashCoupon?"500px":"474px"}},t._l(t.noUsableCouponList,(function(t){return o("coupon-item",{key:t.idx,attrs:{"cus-class":"coupon-list-item","coupon-data":t,"is-usable":!1}})})),1):o("none-page",{staticStyle:{height:"100vh"},attrs:{desc:"您暂无此类"+t.couponTypeName,"img-style":"margin-top:70px;width:165px;height:165px"}})],1)],1)],1)])],1)},a=[],c=(o("a9e3"),o("dde5")),u=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"coupon-item",class:t.cusClass,style:t.cusStyle,on:{click:t.onclick}},[o("div",{staticClass:"coupon-item-card"},[o("div",{staticClass:"coupon-item-card-l"},[o("div",{class:"coupon-item-card-l-val "+(t.isUsable?"":"un-txt")},[t._v(" ¥"+t._s(t.couponData.restAmount)+" ")]),o("div",{class:"coupon-item-card-l-rule "+(t.isUsable?"":"un-txt")},[t._v(" "+t._s(t.couponData.requireAmount?"满"+t.couponData.requireAmount+"减"+t.couponData.discountAmount:"无门槛")+" ")])]),t._m(0),o("div",{staticClass:"coupon-item-card-r"},[o("div",{class:"coupon-item-card-r-name "+(t.isUsable?"":"un-txt")},[t._v(" "+t._s(t.couponData.name)+" ")]),o("div",{class:"coupon-item-card-r-date "+(t.isUsable?"":"un-txt")},[t.couponData.startDate===t.couponData.expiredDate?o("span",[t._v("仅限"+t._s(t.couponData.startDate)+"当天可用")]):o("span",[t._v(t._s(t.couponData.startDate)+"至"+t._s(t.couponData.expiredDate)+"可用")])]),t.canSelect&&t.isUsable&&1===t.couponData.userCouponType?o("div",{staticStyle:{"margin-top":"5px"}},[o("zmjd-tag",{attrs:{color:"rgba(255,65,77,0.2)","text-color":"rgba(255,65,77,1)"}},[t._v(" 本次可用¥"+t._s(t.couponData.orderCanUseDiscountAmount)+" ")])],1):t._e(),t.showDetail&&1===t.couponData.userCouponType?o("div",{staticStyle:{"margin-top":"5px"},on:{click:function(e){return e.stopPropagation(),t.detailClick(e)}}},[t.isUsable?o("zmjd-tag",{attrs:{color:"rgba(255,65,77,0.2)","text-color":"rgba(255,65,77,1)"}},[t._v(" 使用记录"),o("zmjd-icon",{attrs:{name:"arrow-right"}})],1):o("zmjd-tag",{attrs:{color:"rgba(0,0,0,0.06)","text-color":"rgba(0,0,0,0.4)"}},[t._v(" 使用记录"),o("zmjd-icon",{attrs:{name:"arrow-right"}})],1)],1):t._e(),o("div",{staticClass:"coupon-item-card-r-rules",on:{click:function(e){return e.stopPropagation(),t.rulesClick(e)}}},[t._v(" 使用规则 "),t.showRules?o("zmjd-icon",{staticClass:"rules-ctrl-icon",attrs:{name:"arrow-top"}}):o("zmjd-icon",{staticClass:"rules-ctrl-icon",attrs:{name:"arrow-down"}})],1),t.showToUse?o("div",{staticClass:"coupon-item-card-r-touse"},[o("zmjd-button",{staticClass:"coupon-item-card-r-touse-btn",attrs:{type:"danger",size:"small"},on:{click:function(e){return e.stopPropagation(),t.toUseClick(e)}}},[t._v(" 去使用 ")])],1):t._e(),t.canSelect&&t.isUsable?o("div",{staticClass:"coupon-item-card-r-select"},[t.isSelected?o("zmjd-icon",{staticClass:"coupon-item-card-r-selected-icon",attrs:{name:"radio-button"}}):o("zmjd-icon",{staticClass:"coupon-item-card-r-un-selected-icon",attrs:{name:"un-radio-button"}})],1):t._e(),t.showExpireTips&&t.couponData.isShowExpireTips?o("div",{staticClass:"coupon-item-card-r-endtime"},[o("img",{attrs:{src:"http://p1.zmjiudian.com/121ORTs0_jupiter"}})]):t._e()]),o("div",{staticStyle:{clear:"both"}})]),t.showRules?o("div",{staticClass:"coupon-item-rule"},[t._v(" "+t._s(t.couponData.description)+" ")]):t._e()])},p=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"coupon-item-card-m"},[o("img",{attrs:{src:"http://p1.zmjiudian.com/121UPbJ0_jupiter"}})])}],r=(o("ac1f"),o("5319"),o("1276"),{name:"CouponItem",props:{cusStyle:{type:Object,default:function(){return{}}},cusClass:{type:String,default:""},canSelect:{type:Boolean,default:!0},isSelected:{type:Boolean,default:!1},isUsable:{type:Boolean,default:!0},showDetail:{type:Boolean,default:!1},showToUse:{type:Boolean,default:!1},showExpireTips:{type:Boolean,default:!0},couponData:{type:Object,default:function(){return{isShowExpireTips:!0,idx:1,couponDefineID:1,userCouponType:0,expiredDate:"2021-04-14",startDate:"2021-04-14",restAmount:100,requireAmount:1e3,discountAmount:100,orderCanUseDiscountAmount:1e3,name:"优惠券",description:"优惠券描述",state:1,marketingType:0}}}},data:function(){return{showRules:!1}},watch:{value:function(t,e){this.isShowPopup=t}},created:function(){this.initCouponData()},mounted:function(){},methods:{initCouponData:function(){this.couponData.startDate&&(this.couponData.startDate=this.couponData.startDate.split(" ")[0].replace(/-/g,"/")),this.couponData.expiredDate&&(this.couponData.expiredDate=this.couponData.expiredDate.split(" ")[0].replace(/-/g,"/"))},onclick:function(t){this.isUsable&&this.$emit("click",this.couponData)},rulesClick:function(){this.showRules=!this.showRules},detailClick:function(t){this.$emit("detailClick",this.couponData)},toUseClick:function(t){this.$emit("toUseClick",this.couponData)}}}),l=r,d=(o("e529"),o("2877")),h=Object(d["a"])(l,u,p,!1,null,"49ce27f2",null),m=h.exports,C=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"wrap"},[o("div",{staticClass:"none-desc"},[o("img",{style:t.imgStyle,attrs:{src:t.picUrl,alt:""}}),o("div",{staticClass:"desc",style:t.txtStyle},[t._v(" "+t._s(t.desc)+" ")])])])},y=[],b={name:"NonePage",props:{desc:{type:String,default:"这里什么都没有哦~"},picUrl:{type:String,default:"https://p1.zmjiudian.com/120NTFM0_jupiter"},imgStyle:{type:String,default:""},txtStyle:{type:String,default:""}}},f=b,v=(o("0c77"),Object(d["a"])(f,C,y,!1,null,"0d30dee4",null)),x=v.exports,D={name:"CouponPanel",props:{value:{type:Boolean,default:!1},couponType:{type:Number,default:1},canUseFullDiscount:{type:Boolean,default:!0},canUseCashCoupon:{type:Boolean,default:!0},sourceId:{type:Number,default:0},hotelId:{type:Number,default:0},orderType:{type:Number,default:1},orderPrice:{type:Number,default:0},selectIdx:{type:Number,default:0}},components:{"coupon-item":m,"none-page":x},data:function(){return{isShowPopup:this.value,totalOrderPrice:this.orderPrice,couponTypeName:1===this.couponType||"1"===this.couponType?"现金券":"代金券",couponTypeArray:1===this.couponType||"1"===this.couponType?this.canUseFullDiscount?[0,1]:[1]:this.canUseCashCoupon?[2]:[],typeTabValue:0,usableCouponList:[],noUsableCouponList:[],selectCouponIdx:this.selectIdx}},watch:{isShowPopup:function(t,e){this.$emit("input",t)},selectIdx:function(t,e){this.selectCouponIdx=t},orderPrice:function(t,e){t!==e&&(this.totalOrderPrice=t,this.usableCouponList=[],this.noUsableCouponList=[],this.typeTabValue=0,this.typeTabClick(this.typeTabValue))},value:function(t,e){this.isShowPopup=t}},created:function(){this.loadCouponList(!0)},mounted:function(){},methods:{typeTabClick:function(t){switch(t){case 0:this.usableCouponList&&this.usableCouponList.length||this.loadCouponList(!0);break;case 1:this.noUsableCouponList&&this.noUsableCouponList.length||this.loadCouponList(!1);break}},onSelect:function(t){this.$emit("onSelect",t),this.selectCouponIdx=t.idx,this.isShowPopup=!1},onNotUsed:function(t){this.$emit("onNotUsed",t),this.selectCouponIdx=0,this.isShowPopup=!1},loadCouponList:function(t){var e=this,o={orderSourceId:this.sourceId,hotelID:this.hotelId,totalOrderPrice:this.totalOrderPrice,orderTypeId:this.orderType,couponType:this.couponTypeArray,isUsable:t,canUseFullDiscount:this.canUseFullDiscount,canUseCashCoupon:this.canUseCashCoupon};c["a"].getUserCouponList(o).then((function(o){o&&o.length&&(t?e.usableCouponList=o:e.noUsableCouponList=o)}))}}},_=D,T=(o("eae8"),Object(d["a"])(_,i,a,!1,null,"653e9c51",null)),g=T.exports,U={components:{"coupon-panel":g,"coupon-item":m},data:function(){return{showCouponPanel:!1,couponOrderPrice:100,showCashCouponPanel:!1,selectCoupon:{},selectCashCoupon:{},testCouponList:[{isShowExpireTips:!0,idx:7970,couponDefineID:3410,userCouponType:2,expiredDate:"2021-04-15 23:59:59",startDate:"2021-04-15 00:00:00",restAmount:50,requireAmount:500,discountAmount:50,orderCanUseDiscountAmount:0,name:"满500减50",description:"满500减50 *不适用酒店前台现付及担保订单",state:0,marketingType:0},{isShowExpireTips:!1,idx:7971,couponDefineID:3410,userCouponType:1,expiredDate:"2021-06-15 23:59:59",startDate:"2021-04-15 11:10:00",restAmount:98,requireAmount:0,discountAmount:98,orderCanUseDiscountAmount:70,name:"立减98",description:"立减98 *不适用酒店前台现付及担保订单",state:0,marketingType:0},{isShowExpireTips:!1,idx:7972,couponDefineID:3410,userCouponType:3,expiredDate:"2022-04-15 23:59:59",startDate:"2021-04-15 11:10:00",restAmount:100,requireAmount:1e3,discountAmount:100,orderCanUseDiscountAmount:0,name:"代金券100",description:"代金券100块 *不适用酒店前台现付及担保订单",state:0,marketingType:0},{isShowExpireTips:!1,idx:123,couponDefineID:3410,userCouponType:1,expiredDate:"2021-06-15 23:59:59",startDate:"2021-04-15 11:10:00",restAmount:200,requireAmount:0,discountAmount:200,orderCanUseDiscountAmount:200,name:"立减200",description:"立减200 *不适用酒店前台现付及担保订单",state:0,marketingType:0}]}},methods:{openCoupon:function(t){this.couponOrderPrice=t,this.showCouponPanel=!0},openCashCoupon:function(){this.showCashCouponPanel=!0},testDetailClick:function(t){},testToUseClick:function(t){}}},w=U,k=(o("d9e8"),Object(d["a"])(w,s,n,!1,null,null,null));e["default"]=k.exports}}]);